<mxfile host="app.diagrams.net" modified="2021-11-09T09:37:53.646Z" agent="5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36" etag="_qfAos103v6YrCTrWb8M" version="15.7.0" type="github" pages="8">
  <diagram id="8Gsop-xYqd1bkP2zwNOv" name="普通支付流程">
    <mxGraphModel dx="1022" dy="436" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-1" value="金融交换" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="330" y="40" width="100" height="1580" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-2" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="100" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-3" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="230" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-4" value="新增支付提交单（tb_funding_channel_commit_order）&lt;br&gt;，请求类型为入款" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.967;entryY=0.067;entryDx=0;entryDy=0;entryPerimeter=0;align=left;" parent="_x4v-VnwTyk6EA4UEIuB-1" source="_x4v-VnwTyk6EA4UEIuB-5" target="_x4v-VnwTyk6EA4UEIuB-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="75" y="411" />
              <mxPoint x="75" y="448" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-5" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="371" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-6" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;渠道&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;b&gt;筛选&amp;amp;路由&lt;/b&gt;&lt;br&gt;1. 根据支付方式属性、支付交易信息、用户采集要素&lt;br&gt;进行支付渠道筛选（具体流程筛选流程请看&quot;渠道筛选&amp;amp;路由&quot;）&lt;br&gt;2.&amp;nbsp;若无可用支付渠道，则支付失败&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=1;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.475;entryDx=0;entryDy=0;entryPerimeter=0;" parent="_x4v-VnwTyk6EA4UEIuB-1" source="_x4v-VnwTyk6EA4UEIuB-3" target="_x4v-VnwTyk6EA4UEIuB-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="380" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="55" y="310" />
              <mxPoint x="80" y="310" />
              <mxPoint x="80" y="390" />
            </Array>
            <mxPoint x="110" y="405" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-7" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="440" width="10" height="120" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-8" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="630" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-9" value="&lt;div&gt;&lt;/div&gt;1. 根据支付结果（终态）新增支付结果单&lt;br&gt;2. 根据支付结果更新支付提交单&lt;div&gt;3. 根据支付结果更新支付请求单&lt;/div&gt;&lt;div&gt;4. 根据支付结果（提交单或请求单非终态）新增订单补偿单&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="_x4v-VnwTyk6EA4UEIuB-1" target="_x4v-VnwTyk6EA4UEIuB-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="560" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="58" y="560" />
              <mxPoint x="80" y="560" />
              <mxPoint x="80" y="600" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-10" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="720" width="10" height="58" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-11" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="820" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-12" value="根据提交单号或三方单号查询支付请求单&lt;br&gt;1.若请求单不存在，忽略此次callback&lt;br&gt;2.状态为pending，更新有效信息，不包括状态&lt;br&gt;3.状态到终态，更新有效信息，包括状态" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="_x4v-VnwTyk6EA4UEIuB-1" target="_x4v-VnwTyk6EA4UEIuB-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="777" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="57" y="777" />
              <mxPoint x="80" y="777" />
              <mxPoint x="80" y="805" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-13" value="补偿查询定时器" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="35" y="990" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-14" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="1208" width="10" height="42" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-15" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="1486" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-61" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="1100" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-62" value="根据条件（补偿类型、时间、订单类型、状态等）查询&lt;br&gt;订单补偿单表（tb_funding_channel_order_compensate）" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="_x4v-VnwTyk6EA4UEIuB-1" source="_x4v-VnwTyk6EA4UEIuB-13" target="_x4v-VnwTyk6EA4UEIuB-61" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="45" y="1080" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="120" y="1020" />
              <mxPoint x="120" y="1100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-63" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="_x4v-VnwTyk6EA4UEIuB-1" vertex="1">
          <mxGeometry x="45" y="1149" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-64" value="若提交单状态为终态，则根据提交单状态更新请求单状态" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="_x4v-VnwTyk6EA4UEIuB-1" source="_x4v-VnwTyk6EA4UEIuB-61" target="_x4v-VnwTyk6EA4UEIuB-63" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="45" y="1129" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="90" y="1120" />
              <mxPoint x="90" y="1149" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-16" value="渠道网关" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#e3c800;fontColor=#ffffff;strokeColor=#BFA34D;" parent="1" vertex="1">
          <mxGeometry x="694" y="40" width="102" height="1580" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-18" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="_x4v-VnwTyk6EA4UEIuB-16" vertex="1">
          <mxGeometry x="46" y="700" width="10" height="240" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-19" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="_x4v-VnwTyk6EA4UEIuB-16" vertex="1">
          <mxGeometry x="46" y="1160" width="10" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-20" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="_x4v-VnwTyk6EA4UEIuB-16" vertex="1">
          <mxGeometry x="46" y="460" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-22" value="外部集成机构" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;gradientColor=#d5739d;fillColor=#e6d0de;strokeColor=#996185;" parent="1" vertex="1">
          <mxGeometry x="963" y="40" width="102" height="1580" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-23" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="_x4v-VnwTyk6EA4UEIuB-22" vertex="1">
          <mxGeometry x="46" y="501" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-24" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="_x4v-VnwTyk6EA4UEIuB-22" vertex="1">
          <mxGeometry x="36" y="690" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-25" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="_x4v-VnwTyk6EA4UEIuB-22" vertex="1">
          <mxGeometry x="46" y="1186" width="10" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-26" value="发起支付请求（支付下单接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-40" target="_x4v-VnwTyk6EA4UEIuB-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="69.5" y="140.0000000000025" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-27" value="校验不通过，返回支付失败" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-2" target="_x4v-VnwTyk6EA4UEIuB-40" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="69.5" y="814.4999999999984" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-28" value="前置校验&#xa;1.必填参数校验（交易单号、商户ID、金额、支付方式信息等）&#xa;" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="1" vertex="1">
          <mxGeometry x="383" y="160" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-29" value="根据支付渠道，发起支付申请（渠道统一调用接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=-0.067;entryY=0.185;exitX=1.2;exitY=0.09;exitDx=0;exitDy=0;exitPerimeter=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="_x4v-VnwTyk6EA4UEIuB-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="518.8" as="sourcePoint" />
            <mxPoint x="740" y="518" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-30" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;entryX=1.1;entryY=0.894;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="_x4v-VnwTyk6EA4UEIuB-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="566" as="targetPoint" />
            <mxPoint x="737" y="587" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-32" value="无可用渠道，返回支付失败" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.725;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-5" target="_x4v-VnwTyk6EA4UEIuB-40" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="440" as="sourcePoint" />
            <mxPoint x="290" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-33" value="支付接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-20" target="_x4v-VnwTyk6EA4UEIuB-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="939" y="480" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-34" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.167;exitY=0.653;entryX=1.067;entryY=0.883;entryDx=0;entryDy=0;entryPerimeter=0;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750.6700000000001" y="586.682" as="targetPoint" />
            <mxPoint x="1010.6700000000001" y="587.65" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-35" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.2;exitY=0.7;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-8" target="_x4v-VnwTyk6EA4UEIuB-40" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="670" as="sourcePoint" />
            <mxPoint x="290" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-36" value="回调通知（callback回调接口）" style="html=1;verticalAlign=bottom;endArrow=open;entryX=0.9;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.1;exitY=0.121;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="737" y="770" as="sourcePoint" />
            <mxPoint x="383" y="770" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-37" value="支付结果回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="374" y="948" as="sourcePoint" />
            <mxPoint x="78.5" y="948" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-38" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="1" vertex="1">
          <mxGeometry x="375" y="930" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-39" value="1.新增支付结果单&lt;br&gt;2.更新支付提交单和支付请求单（事务）&lt;br&gt;3.根据支付结果（终态）更新订单补偿单状态为无需补偿" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=1;exitY=0.875;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-11" target="_x4v-VnwTyk6EA4UEIuB-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="890" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="895" />
              <mxPoint x="410" y="930" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-40" value="支付引擎" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="1" vertex="1">
          <mxGeometry x="29" y="40" width="100" height="1580" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-41" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="_x4v-VnwTyk6EA4UEIuB-40" vertex="1">
          <mxGeometry x="35" y="70" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-42" value="callback（渠道callback接口）" style="html=1;verticalAlign=bottom;endArrow=block;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="810" y="830" as="sourcePoint" />
            <mxPoint x="751" y="760" as="targetPoint" />
            <Array as="points">
              <mxPoint x="840" y="760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-43" value="返回callback结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-18" target="_x4v-VnwTyk6EA4UEIuB-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="810" y="887" as="targetPoint" />
            <Array as="points">
              <mxPoint x="870" y="980" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-44" value="返回回调结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=1;exitY=0.82;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="741" y="970" as="targetPoint" />
            <mxPoint x="390" y="970" as="sourcePoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-45" value="&lt;div style=&quot;text-align: left&quot;&gt;若提交单为非状态，则查询支付结果（渠道统一调用接口）&lt;/div&gt;" style="html=1;verticalAlign=bottom;endArrow=block;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-63" target="_x4v-VnwTyk6EA4UEIuB-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="450" y="1210" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="560" y="1220" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-46" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-19" target="_x4v-VnwTyk6EA4UEIuB-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="670" y="1256" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-47" value="查询支付结果接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-19" target="_x4v-VnwTyk6EA4UEIuB-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="939" y="1180" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-48" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;entryX=1.1;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="751" y="1248" as="targetPoint" />
            <mxPoint x="1009" y="1248" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-49" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="1" vertex="1">
          <mxGeometry x="375" y="1323" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-50" value="根据本次查询结果&lt;br&gt;1.处理中，更新有效信息，不更新状态；并且更新补偿单下次执行时间（时间衰减）&lt;br&gt;2.终态，更新有效信息，更新状态；" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="1" target="_x4v-VnwTyk6EA4UEIuB-49" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="1280" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="387" y="1280" />
              <mxPoint x="410" y="1280" />
              <mxPoint x="410" y="1308" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-51" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="1" vertex="1">
          <mxGeometry x="375" y="1393" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-52" value="1.新增支付结果单（订单为终态时）&lt;br&gt;2.更新支付提交单和支付请求单（事务）&lt;br&gt;3.根据支付结果（终态）更新订单补偿单状态为无需补偿" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=1;exitY=0.875;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-49" target="_x4v-VnwTyk6EA4UEIuB-51" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="1353" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="1358" />
              <mxPoint x="410" y="1393" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-53" value="支付结果回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="1430" as="sourcePoint" />
            <mxPoint x="79.5" y="1430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-54" value="补偿查询" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="64" y="1497" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-55" value="发起支付结果查询（支付查询接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-54" target="_x4v-VnwTyk6EA4UEIuB-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="305" y="1530" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-56" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="1" source="_x4v-VnwTyk6EA4UEIuB-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="78.5" y="1602" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-57" value="1.必填参数校验（支付单号）&#xa;2.查询支付请求单，获取支付结果" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="1" vertex="1">
          <mxGeometry x="385" y="1530" width="305" height="70" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-58" value="&lt;span style=&quot;color: rgb(50 , 50 , 50) ; background-color: rgba(255 , 255 , 255 , 0.01)&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;返回数据分类：&lt;/font&gt;&lt;/span&gt;&lt;div style=&quot;resize: none ; outline: 0px ; color: rgb(50 , 50 , 50)&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;1. 直接下单成功或失败或支付中（如卡支付等）&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;resize: none ; outline: 0px ; color: rgb(50 , 50 , 50)&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;2. 返回展示数据（如条形码、二维码等）&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;resize: none ; outline: 0px ; color: rgb(50 , 50 , 50)&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;3. 返回URL（如3DS、跳转支付URL等）&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;resize: none ; outline: 0px ; color: rgb(50 , 50 , 50)&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;&lt;span style=&quot;background-color: rgba(255 , 255 , 255 , 0.01)&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;4. 返回用户交互（如用户输入OTP等）&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;strokeWidth=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="90" y="586" width="260" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-59" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;新增支付请求单（&lt;/span&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;tb_funding_channel_request_order&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;）&lt;br&gt;，请求类型为入款&lt;br&gt;1.基于上游支付单号（唯一索引）进行&lt;b&gt;幂等&lt;/b&gt;校验&lt;br&gt;&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=1;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.475;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="210.00000000000003" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="385" y="213.52" />
              <mxPoint x="410" y="213.52" />
              <mxPoint x="410" y="293.52" />
            </Array>
            <mxPoint x="385" y="293.52" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_x4v-VnwTyk6EA4UEIuB-65" value="请求单为终态，则支付结果回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="1210" as="sourcePoint" />
            <mxPoint x="79.5" y="1210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dr9-YjEkrZpF9QjqHSSQ-1" value="幂等校验不通过，返回支付失败" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.725;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="330" as="sourcePoint" />
            <mxPoint x="77.5" y="330" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="kTb_Oj8JfnfGNh_GeNg0" name="OTP支付流程">
    <mxGraphModel dx="1849" dy="436" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-0" />
        <mxCell id="EWQLTNDLz9GqepmQOaUB-1" parent="EWQLTNDLz9GqepmQOaUB-0" />
        <mxCell id="EWQLTNDLz9GqepmQOaUB-2" value="loop" style="shape=umlFrame;whiteSpace=wrap;html=1;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="-480" y="800" width="1530" height="570" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-3" value="金融交换" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="330" y="40" width="100" height="2060" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-4" value="1. 新增控制请求单（tb_funding_channel_request_order）&lt;br&gt;，请求类型为OTP验证&lt;br&gt;2. 新增控制提交单（tb_funding_channel_commit_order）&lt;br&gt;，请求类型为OTP验证" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.212;entryDx=0;entryDy=0;entryPerimeter=0;align=left;verticalAlign=middle;" parent="EWQLTNDLz9GqepmQOaUB-3" source="EWQLTNDLz9GqepmQOaUB-5" target="EWQLTNDLz9GqepmQOaUB-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="90" y="890" />
              <mxPoint x="90" y="963" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-5" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="EWQLTNDLz9GqepmQOaUB-3" vertex="1">
          <mxGeometry x="50" y="797" width="10" height="96" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-6" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="EWQLTNDLz9GqepmQOaUB-3" vertex="1">
          <mxGeometry x="50" y="923" width="10" height="190" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-7" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;verticalAlign=middle;" parent="EWQLTNDLz9GqepmQOaUB-3" vertex="1">
          <mxGeometry x="50" y="1153" width="10" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-8" value="1.根据接口结果（终态）新增支付结果单&lt;br&gt;2.根据结果更新控制提交单&lt;br&gt;3.根据结果更新控制请求单&lt;br&gt;4.根据支付请求单号更新支付提交单&lt;br&gt;5.根据支付请求单号更新支付请求单&lt;br&gt;6.根据支付结果（提交单或请求单非终态）新增订单补偿单" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" parent="EWQLTNDLz9GqepmQOaUB-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="59" y="1113" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="89" y="1113" />
              <mxPoint x="89" y="1188" />
              <mxPoint x="60" y="1188" />
            </Array>
            <mxPoint x="60" y="1188" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-9" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-3" vertex="1">
          <mxGeometry x="45" y="1460" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-10" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-3" vertex="1">
          <mxGeometry x="45" y="1640" width="10" height="230" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-11" value="1. 新增控制请求单（tb_funding_channel_request_order）&lt;br&gt;，请求类型为“resend_otp”&lt;br&gt;2.根据“重发的渠道支付单号”，查询要发送的资金渠道信息&lt;br&gt;3. 新增控制提交单（tb_funding_channel_commit_order）&lt;br&gt;，请求类型为“resend_otp”" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-3" target="EWQLTNDLz9GqepmQOaUB-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="60" y="1540" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="50" y="1540" />
              <mxPoint x="80" y="1540" />
              <mxPoint x="80" y="1600" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-12" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-3" vertex="1">
          <mxGeometry x="45" y="1910" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-13" value="1.根据结果（终态）更新控制提交单&lt;br&gt;2.根据结果（终态）更新控制请求单" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-3" target="EWQLTNDLz9GqepmQOaUB-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="1870" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="50" y="1870" />
              <mxPoint x="80" y="1870" />
              <mxPoint x="80" y="1990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-14" value="渠道网关" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#e3c800;fontColor=#ffffff;strokeColor=#BFA34D;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="694" y="40" width="102" height="2060" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-15" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="EWQLTNDLz9GqepmQOaUB-14" vertex="1">
          <mxGeometry x="51" y="960" width="10" height="123" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-16" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-14" vertex="1">
          <mxGeometry x="46" y="1710" width="10" height="150" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-17" value="外部集成机构" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;gradientColor=#d5739d;fillColor=#e6d0de;strokeColor=#996185;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="963" y="40" width="102" height="1860" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-18" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="EWQLTNDLz9GqepmQOaUB-17" vertex="1">
          <mxGeometry x="46" y="1005" width="10" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-19" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-17" vertex="1">
          <mxGeometry x="46" y="1750" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-20" value="支付引擎" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="29" y="40" width="100" height="2070" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-21" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-20" vertex="1">
          <mxGeometry x="45" y="620" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-22" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-20" vertex="1">
          <mxGeometry x="45" y="70" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-23" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-20" vertex="1">
          <mxGeometry x="45" y="193" width="10" height="270" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-24" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-20" vertex="1">
          <mxGeometry x="45" y="760" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-25" value="收银台" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="-380" y="40" width="100" height="2070" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-26" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="EWQLTNDLz9GqepmQOaUB-25" vertex="1">
          <mxGeometry x="49" y="633" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-27" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="EWQLTNDLz9GqepmQOaUB-25" vertex="1">
          <mxGeometry x="49" y="743" width="10" height="97" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-28" value="展示OTP输入页面，用户输入OTP" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-25" target="EWQLTNDLz9GqepmQOaUB-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="60" y="703" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="80" y="703" />
              <mxPoint x="80" y="743" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-29" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-25" vertex="1">
          <mxGeometry x="45" y="200" width="10" height="270" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-30" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-25" vertex="1">
          <mxGeometry x="45" y="1380" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EWQLTNDLz9GqepmQOaUB-25" source="EWQLTNDLz9GqepmQOaUB-30" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="1446" as="targetPoint" />
            <Array as="points">
              <mxPoint x="75" y="1390" />
              <mxPoint x="75" y="1446" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-32" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-25" vertex="1">
          <mxGeometry x="44" y="1990" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-33" value="根据结果判断是否需要&lt;br&gt;让用户再次输入OTP" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-25" target="EWQLTNDLz9GqepmQOaUB-32" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="49" y="1970" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="79" y="1970" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-34" value="返回支付下单结果（含&lt;span style=&quot;color: rgb(50 , 50 , 50) ; font-size: 12px ; text-align: left ; background-color: rgba(255 , 255 , 255 , 0.01)&quot;&gt;用户交互要素：输入OTP&lt;/span&gt;）" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-21" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="699" as="sourcePoint" />
            <mxPoint x="78.5" y="699" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-35" value="发起OTP验证请求（统一控制接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="84" y="850" as="sourcePoint" />
            <mxPoint x="380" y="850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-36" value="返回支付下单结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.2;exitY=0.717;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-21" target="EWQLTNDLz9GqepmQOaUB-70" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-164" y="690" as="targetPoint" />
            <mxPoint x="79" y="690" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-37" value="校验不通过，返回失败（不同错误码）" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="80" y="928" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-38" value="前置校验&#xa;1.必填参数校验（支付单号、验证码等）&#xa;2.支付单号对应支付请求单是否存在（tb_funding_channel_request_order），&#xa;若不存在，则不通过&#xa;3. 支付请求单是否为终态（成功或失败），若是，则不通过&#xa;" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="389" y="853" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-39" value="发起OTP支付验证请求（渠道统一调用接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="390" y="1035" as="sourcePoint" />
            <mxPoint x="745" y="1035" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-40" value="1. 渠道参数验证，若不通过，则返回失败" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="753" y="1004" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-41" value="发起OTP支付验证" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-15" target="EWQLTNDLz9GqepmQOaUB-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="939" y="550" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-42" value="返回支付验证结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;entryX=1.2;entryY=0.824;entryDx=0;entryDy=0;entryPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-18" target="EWQLTNDLz9GqepmQOaUB-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="939" y="626" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-43" value="返回支付验证结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-15" target="EWQLTNDLz9GqepmQOaUB-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="675" y="913" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-44" value="返回支付验证结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="78.5" y="940" as="sourcePoint" />
            <mxPoint x="-130.5" y="940" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-45" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.314;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="345" y="1213" as="sourcePoint" />
            <mxPoint x="83.5" y="1214.98" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-46" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="375" y="140" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-47" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="375" y="260" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-48" value="1.新增支付提交单（tb_funding_commit_order）,请求类型为入款" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.967;entryY=0.067;entryDx=0;entryDy=0;entryPerimeter=0;align=left;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-49" target="EWQLTNDLz9GqepmQOaUB-51" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="405" y="451" />
              <mxPoint x="405" y="488" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-49" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="375" y="390" width="10" height="61" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-50" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;渠道&lt;b&gt;筛选&amp;amp;路由&lt;/b&gt;&lt;/span&gt;&lt;br style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;1. 根据支付方式属性、支付交易信息、用户采集要素进行&lt;br&gt;支付渠道筛选（具体流程筛选流程请看&quot;渠道筛选&amp;amp;路由&quot;）&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;2.&amp;nbsp;若无可用支付渠道，则支付失败&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;br&gt;&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=1;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-47" target="EWQLTNDLz9GqepmQOaUB-49" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="380" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="337" />
              <mxPoint x="410" y="410" />
            </Array>
            <mxPoint x="110" y="405" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-51" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="375" y="480" width="10" height="120" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-52" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="375" y="670" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-53" value="&lt;div&gt;&lt;/div&gt;1. 根据接口结果（终态）新增支付结果单&lt;br&gt;2. 根据支付结果更新支付提交单&lt;div&gt;3. 根据支付结果更新支付请求单&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-52" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="600" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="388" y="600" />
              <mxPoint x="410" y="600" />
              <mxPoint x="410" y="640" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-54" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="740" y="490" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-55" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="740" y="546" width="10" height="54" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-56" value="1. 渠道参数校验，若不通过，则返回支付失败" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750" y="526" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="750" y="510" />
              <mxPoint x="770" y="510" />
              <mxPoint x="770" y="546" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-57" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="1009" y="562" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-58" value="发起OTP申请（支付下单接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="85" y="161" as="sourcePoint" />
            <mxPoint x="375" y="161" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-59" value="校验不通过，返回支付失败" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-46" target="EWQLTNDLz9GqepmQOaUB-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="78.5" y="234.9999999999999" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-60" value="前置校验&#xa;1.必填参数校验（交易单号、商户ID、金额、支付方式信息等）&#xa;&#xa;" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="385" y="180" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-61" value="根据支付渠道，发起OTP申请（渠道统一调用接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=1.2;exitY=0.09;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="518.8" as="sourcePoint" />
            <mxPoint x="740" y="518" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-62" value="返回申请结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;entryX=1.1;entryY=0.894;entryDx=0;entryDy=0;entryPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-51" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="566" as="targetPoint" />
            <mxPoint x="737" y="587" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-64" value="若支付状态为失败，返回数据" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.725;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-49" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="440" as="sourcePoint" />
            <mxPoint x="85" y="434" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-65" value="OTP申请接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=0.933;exitY=0.296;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-55" target="EWQLTNDLz9GqepmQOaUB-57" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="939" y="480" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-66" value="返回申请结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.167;exitY=0.653;entryX=1.067;entryY=0.883;entryDx=0;entryDy=0;entryPerimeter=0;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750.6700000000001" y="586.682" as="targetPoint" />
            <mxPoint x="1010.6700000000001" y="587.6500000000001" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-67" value="发起OTP申请（支付下单申请）" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.167;entryY=0.375;entryDx=0;entryDy=0;entryPerimeter=0;align=left;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;verticalAlign=bottom;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-68" target="EWQLTNDLz9GqepmQOaUB-71" edge="1">
          <mxGeometry x="-0.7931" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-68" value="发起OTP申请" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="-345" y="110" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-69" value="订单中心" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="-180" y="40" width="100" height="2070" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-70" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-69" vertex="1">
          <mxGeometry x="45" y="630" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-71" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-69" vertex="1">
          <mxGeometry x="45" y="70" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-72" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-69" vertex="1">
          <mxGeometry x="45" y="200" width="10" height="270" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-73" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-69" vertex="1">
          <mxGeometry x="45" y="760" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-74" value="返回支付下单结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.367;exitY=0.717;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-70" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-320" y="727.3599999999999" as="targetPoint" />
            <mxPoint x="-140" y="727" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-75" value="发起OTP申请（支付下单申请）" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;align=center;verticalAlign=bottom;labelPosition=center;verticalLabelPosition=middle;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-71" target="EWQLTNDLz9GqepmQOaUB-22" edge="1">
          <mxGeometry x="-0.0452" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-76" value="返回支付下单结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.2;exitY=0.717;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-124" y="269.9999999999999" as="targetPoint" />
            <mxPoint x="73" y="269.9999999999999" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-77" value="返回支付下单结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.2;exitY=0.717;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-123" y="459.9999999999999" as="targetPoint" />
            <mxPoint x="74" y="459.9999999999999" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-78" value="返回支付下单结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;entryX=0.9;entryY=0.195;entryDx=0;entryDy=0;entryPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-320" y="289.9999999999999" as="targetPoint" />
            <mxPoint x="-139" y="293" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-79" value="返回支付下单结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.367;exitY=0.717;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1.033;entryY=0.923;entryDx=0;entryDy=0;entryPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-318" y="489.9999999999999" as="targetPoint" />
            <mxPoint x="-136.67000000000007" y="489.9999999999999" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-80" value="发起OTP验证" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.067;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;align=center;verticalAlign=bottom;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-73" target="EWQLTNDLz9GqepmQOaUB-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-81" value="发起OTP验证" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.033;entryY=0.392;entryDx=0;entryDy=0;entryPerimeter=0;align=center;verticalAlign=bottom;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-27" target="EWQLTNDLz9GqepmQOaUB-73" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-82" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="79" y="1230" as="sourcePoint" />
            <mxPoint x="-130" y="1230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-83" value="返回支付验证结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-130" y="960" as="sourcePoint" />
            <mxPoint x="-330" y="960" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-84" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-130" y="1250" as="sourcePoint" />
            <mxPoint x="-330" y="1250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-85" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="-331" y="1270" width="10" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.9;entryY=0.833;entryDx=0;entryDy=0;entryPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-85" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-322" y="1280" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="-301" y="1280" />
              <mxPoint x="-301" y="1320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-87" value="判断是否可以再次验证OTP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="-290" y="1290" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-88" value="判断是否有&lt;br&gt;重发OTP接口&lt;br&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="-300" y="1435" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-89" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-30" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="1510" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-180" y="1510" />
              <mxPoint x="-180" y="1510" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-90" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EWQLTNDLz9GqepmQOaUB-89" vertex="1" connectable="0">
          <mxGeometry x="-0.7816" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-91" value="前置参数校验&lt;br&gt;1.必填校验，重发的订单单号&lt;br&gt;2.请求类型为：“resend_otp”" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="390" y="1514" width="170" height="50" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="740" y="1760" as="targetPoint" />
            <Array as="points">
              <mxPoint x="470" y="1760" />
              <mxPoint x="470" y="1760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-93" value="发起“重发otp”请求（渠道统一调用接口）" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EWQLTNDLz9GqepmQOaUB-92" vertex="1" connectable="0">
          <mxGeometry x="-0.1493" y="-1" relative="1" as="geometry">
            <mxPoint x="14" y="-11" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-94" value="dispatch" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750" y="1790" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-96" value="return" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="751" y="1862" as="targetPoint" />
            <mxPoint x="1009" y="1862" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-97" value="发起“resend_otp”请求" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="815" y="1800" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-98" value="返回重发otp 结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="482" y="1880.0000000000002" as="targetPoint" />
            <mxPoint x="740" y="1880" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-99" value="返回请求结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.314;exitDx=0;exitDy=0;exitPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="1980" as="sourcePoint" />
            <mxPoint x="-330" y="1980" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.018;entryY=1.007;entryDx=0;entryDy=0;entryPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" source="EWQLTNDLz9GqepmQOaUB-101" target="EWQLTNDLz9GqepmQOaUB-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-452" y="2120" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-101" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="EWQLTNDLz9GqepmQOaUB-1" vertex="1">
          <mxGeometry x="-335" y="2090" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EWQLTNDLz9GqepmQOaUB-102" value="再次输入OTP，走OTP验证逻辑" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-101" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-326" y="2070" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="-296" y="2070" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="XzPAd4yo1nc5LfJ201Pz-0" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;新增支付请求单（&lt;/span&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;tb_funding_channel_request_order&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;）&lt;br&gt;，请求类型为入款&lt;br&gt;1.基于上游支付单号（唯一索引）进行&lt;b&gt;幂等&lt;/b&gt;校验&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=1;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.475;entryDx=0;entryDy=0;entryPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="230.02000000000004" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="230.3" />
              <mxPoint x="410" y="285.3" />
            </Array>
            <mxPoint x="385" y="285.3" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4o0zyrz8Yg0o5yG6SWKR-0" value="幂等校验不通过，返回支付失败" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.725;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.967;entryY=0.28;entryDx=0;entryDy=0;entryPerimeter=0;" parent="EWQLTNDLz9GqepmQOaUB-1" target="EWQLTNDLz9GqepmQOaUB-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="310" as="sourcePoint" />
            <mxPoint x="77.5" y="310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="HVy-kELQ3NIcjvjKtujW" name="授权支付流程">
    <mxGraphModel dx="1849" dy="436" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-0" />
        <mxCell id="ZM-r9oJYv715uIu2z8fY-1" parent="ZM-r9oJYv715uIu2z8fY-0" />
        <mxCell id="ZM-r9oJYv715uIu2z8fY-2" value="授权服务" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="-220" y="40" width="100" height="1580" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-3" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="-185" y="110" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-4" value="发起签约授权申请请求（授权申请接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="305" y="130" as="sourcePoint" />
            <mxPoint x="375" y="140.0000000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-5" value="金融交换" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="330" y="40" width="100" height="2500" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-6" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;" parent="ZM-r9oJYv715uIu2z8fY-5" vertex="1">
          <mxGeometry x="45" y="100" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-7" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="ZM-r9oJYv715uIu2z8fY-5" vertex="1">
          <mxGeometry x="45" y="240" width="10" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-8" value="1.新增控制提交单（tb_funding_channel_commit_order），&lt;br&gt;请求类型为授权申请&lt;br&gt;2.新增授权业务信息（tb_authorization）" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.033;entryY=0.156;entryDx=0;entryDy=0;entryPerimeter=0;align=left;verticalAlign=middle;" parent="ZM-r9oJYv715uIu2z8fY-5" source="ZM-r9oJYv715uIu2z8fY-9" target="ZM-r9oJYv715uIu2z8fY-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="75" y="390" />
              <mxPoint x="75" y="459" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-9" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="ZM-r9oJYv715uIu2z8fY-5" vertex="1">
          <mxGeometry x="45" y="340" width="10" height="71" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-10" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;渠道筛选&amp;amp;路由&lt;/span&gt;&lt;br style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;1. 根据支付方式属性、用户采集要素进行授权渠道&lt;br&gt;筛选和路由（具体流程筛选流程请看&quot;渠道筛选&amp;amp;路由&quot;）&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" parent="ZM-r9oJYv715uIu2z8fY-5" source="ZM-r9oJYv715uIu2z8fY-7" target="ZM-r9oJYv715uIu2z8fY-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="380" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="80" y="290" />
              <mxPoint x="80" y="360" />
            </Array>
            <mxPoint x="110" y="405" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-11" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="ZM-r9oJYv715uIu2z8fY-5" vertex="1">
          <mxGeometry x="45" y="440" width="10" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-12" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-5" vertex="1">
          <mxGeometry x="45" y="630" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-13" value="&lt;div&gt;1. 根据授权结果更新控制提交单&lt;br&gt;&lt;/div&gt;&lt;div&gt;2. 根据授权结果更新控制请求单&lt;/div&gt;&lt;div&gt;3. 更新授权业务信息&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="ZM-r9oJYv715uIu2z8fY-5" target="ZM-r9oJYv715uIu2z8fY-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="560" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="58" y="560" />
              <mxPoint x="80" y="560" />
              <mxPoint x="80" y="600" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-14" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-5" vertex="1">
          <mxGeometry x="45" y="885" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-15" value="根据提交单号或三方单号查询授权请求单，若请求单不存在&lt;br&gt;或状态为终态（成功或失败），则忽略此次callback，&lt;br&gt;不再执行后续流程" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.933;entryY=0.325;entryDx=0;entryDy=0;entryPerimeter=0;align=left;" parent="ZM-r9oJYv715uIu2z8fY-5" source="ZM-r9oJYv715uIu2z8fY-16" target="ZM-r9oJYv715uIu2z8fY-14" edge="1">
          <mxGeometry x="-0.0978" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="75" y="850" />
              <mxPoint x="75" y="898" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-16" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="ZM-r9oJYv715uIu2z8fY-5" vertex="1">
          <mxGeometry x="45" y="810" width="10" height="43" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-17" value="渠道网关" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#e3c800;fontColor=#ffffff;strokeColor=#BFA34D;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="694" y="40" width="102" height="2500" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-18" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="ZM-r9oJYv715uIu2z8fY-17" vertex="1">
          <mxGeometry x="46" y="450" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-19" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="ZM-r9oJYv715uIu2z8fY-17" vertex="1">
          <mxGeometry x="46" y="700" width="10" height="140" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-20" value="外部集成机构" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;gradientColor=#d5739d;fillColor=#e6d0de;strokeColor=#996185;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="963" y="40" width="102" height="2500" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-21" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="ZM-r9oJYv715uIu2z8fY-20" vertex="1">
          <mxGeometry x="46" y="465" width="10" height="75" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-22" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="ZM-r9oJYv715uIu2z8fY-20" vertex="1">
          <mxGeometry x="36" y="690" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-23" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="ZM-r9oJYv715uIu2z8fY-20" vertex="1">
          <mxGeometry x="46" y="780" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-24" value="校验不通过，返回入款失败" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.753;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-6" target="ZM-r9oJYv715uIu2z8fY-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="69.5" y="814.4999999999984" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-25" value="前置校验&#xa;1.必填参数校验（授权单号、商户ID、用户ID、金额、支付方式信息等）&#xa;" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="383" y="160" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-26" value="根据授权渠道，发起授权申请" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=1.2;exitY=0.09;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="514.8" as="sourcePoint" />
            <mxPoint x="740" y="514" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-27" value="返回授权签约URL" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;entryX=1.167;entryY=0.867;entryDx=0;entryDy=0;entryPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-18" target="ZM-r9oJYv715uIu2z8fY-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="566" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-29" value="若授权状态为失败，返回数据" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.725;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="376" y="417.475" as="sourcePoint" />
            <mxPoint x="-170.5" y="417.475" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-30" value="授权申请接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750" y="537" as="sourcePoint" />
            <mxPoint x="1009" y="537" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-31" value="返回授权签约URL" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-21" target="ZM-r9oJYv715uIu2z8fY-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="717" y="553" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-32" value="返回授权签约URL" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.2;exitY=0.7;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-12" target="ZM-r9oJYv715uIu2z8fY-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="670" as="sourcePoint" />
            <mxPoint x="290" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-33" value="授权结果通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="374" y="1024" as="sourcePoint" />
            <mxPoint x="-170.5" y="1024" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-34" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="1007" width="10" height="28" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-35" value="1.更新授权业务信息（tb_authorization）&lt;br&gt;2.更新控制提交单&lt;br&gt;3.更新控制请求单" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=1;exitY=0.875;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-14" target="ZM-r9oJYv715uIu2z8fY-34" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="966" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="960" />
              <mxPoint x="410" y="1006" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-36" value="支付引擎" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="29" y="40" width="100" height="2500" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-37" value="异步通知callback" style="html=1;verticalAlign=bottom;endArrow=block;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="810" y="830" as="sourcePoint" />
            <mxPoint x="751" y="760" as="targetPoint" />
            <Array as="points">
              <mxPoint x="840" y="760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-38" value="获取授权码接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="ZM-r9oJYv715uIu2z8fY-1" target="ZM-r9oJYv715uIu2z8fY-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="751" y="820" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-39" value="返回授权码" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="752" y="861" as="targetPoint" />
            <mxPoint x="1009" y="858.5" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-40" value="授权结果通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.033;exitY=0.91;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-19" target="ZM-r9oJYv715uIu2z8fY-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="734.5" y="890" as="sourcePoint" />
            <mxPoint x="510" y="820" as="targetPoint" />
            <Array as="points">
              <mxPoint x="620" y="868" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-41" value="1. 渠道参数验证，若不通过，则返回失败" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="746" y="490" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-42" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="1097" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-43" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="1260" width="10" height="77" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-44" value="1.新增支付提交单（tb_funding_channel_commit_order）&lt;br&gt;，请求类型为协议扣款" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.967;entryY=0.067;entryDx=0;entryDy=0;entryPerimeter=0;align=left;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-45" target="ZM-r9oJYv715uIu2z8fY-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="405" y="1408" />
              <mxPoint x="405" y="1445" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-45" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="1368" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-46" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;渠道筛选&amp;amp;路由&lt;br&gt;1. 通过&lt;/span&gt;&lt;span style=&quot;font-size: 12px ; font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;“资金渠道编码”、“资金渠道配置编码”&lt;span style=&quot;font-size: 11px&quot;&gt;查询资金渠道能力，&lt;br&gt;若渠道不可用，则返回无可用渠道&lt;/span&gt;&lt;br&gt;&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=1;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.475;entryDx=0;entryDy=0;entryPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-43" target="ZM-r9oJYv715uIu2z8fY-45" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="1337" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="1332" />
              <mxPoint x="410" y="1387" />
            </Array>
            <mxPoint x="110" y="1362" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-47" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="1437" width="10" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-48" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="1627" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-49" value="&lt;div&gt;&lt;/div&gt;1. 根据支付结果（终态）新增支付结果单&lt;br&gt;2. 根据支付结果更新支付提交单&lt;div&gt;3. 根据支付结果更新支付请求单&lt;/div&gt;&lt;div&gt;4. 根据支付结果（提交单或请求单非终态）新增订单补偿单&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="ZM-r9oJYv715uIu2z8fY-1" target="ZM-r9oJYv715uIu2z8fY-48" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="1557" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="388" y="1557" />
              <mxPoint x="410" y="1557" />
              <mxPoint x="410" y="1597" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-50" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="1717" width="10" height="58" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-51" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="1817" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-52" value="根据提交单号或三方单号查询支付请求单&lt;br&gt;1.若请求单不存在，忽略此次callback&lt;br&gt;2.状态为pending，更新有效信息，不包括状态&lt;br&gt;3.状态到终态，更新有效信息，包括状态" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="ZM-r9oJYv715uIu2z8fY-1" target="ZM-r9oJYv715uIu2z8fY-51" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="1774" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="387" y="1774" />
              <mxPoint x="410" y="1774" />
              <mxPoint x="410" y="1802" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-54" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="2178" width="10" height="42" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-55" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="2456" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-56" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="740" y="1447" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-57" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="740" y="1697" width="10" height="240" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-58" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="740" y="2130" width="10" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-59" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="740" y="1503" width="10" height="54" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-60" value="1. 渠道参数校验，若不通过，则返回支付失败" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="ZM-r9oJYv715uIu2z8fY-1" target="ZM-r9oJYv715uIu2z8fY-59" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750" y="1483" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="750" y="1467" />
              <mxPoint x="770" y="1467" />
              <mxPoint x="770" y="1503" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-61" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="1009" y="1519" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-62" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="999" y="1687" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-63" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="1009" y="2152" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-64" value="发起支付请求，请求类型为协议扣款（支付下单接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="ZM-r9oJYv715uIu2z8fY-1" target="ZM-r9oJYv715uIu2z8fY-42" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="78.5" y="1097" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-65" value="校验不通过，返回支付失败" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="78.5" y="1182" as="targetPoint" />
            <mxPoint x="375" y="1182" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-66" value="前置校验&#xa;1.必填参数校验（交易单号、商户ID、金额、授权码等）&#xa;2.根据授权码查询机构授权表（tb_authorization），若记录不存在，&#xa;则不通过，若存在，则获取资金渠道编码和资金渠道配置编码" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="383" y="1105" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-67" value="根据支付渠道，发起支付申请（渠道统一调用接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=1.2;exitY=0.09;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="1475.8" as="sourcePoint" />
            <mxPoint x="740" y="1475" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-68" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;entryX=1.1;entryY=0.894;entryDx=0;entryDy=0;entryPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" target="ZM-r9oJYv715uIu2z8fY-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="1523" as="targetPoint" />
            <mxPoint x="737" y="1544" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-70" value="若支付状态为失败，返回数据" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.725;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-45" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="1397" as="sourcePoint" />
            <mxPoint x="78.5" y="1397" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-71" value="支付接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=0.933;exitY=0.296;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-59" target="ZM-r9oJYv715uIu2z8fY-61" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="939" y="1437" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-72" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.167;exitY=0.653;entryX=1.067;entryY=0.883;entryDx=0;entryDy=0;entryPerimeter=0;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750.6700000000001" y="1543.682" as="targetPoint" />
            <mxPoint x="1010.6700000000001" y="1544.65" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-73" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.2;exitY=0.7;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-48" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="1627" as="sourcePoint" />
            <mxPoint x="78.5" y="1655" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-74" value="回调通知（callback回调接口）" style="html=1;verticalAlign=bottom;endArrow=open;entryX=0.9;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.1;exitY=0.121;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-57" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="737" y="1727" as="sourcePoint" />
            <mxPoint x="383" y="1727" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-75" value="回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="374" y="1905" as="sourcePoint" />
            <mxPoint x="78.5" y="1905" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-76" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="1887" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-77" value="1.新增支付结果单&lt;br&gt;2.更新支付提交单和支付请求单（事务）&lt;br&gt;3.根据支付结果（终态）更新订单补偿单状态为无需补偿" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=1;exitY=0.875;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-51" target="ZM-r9oJYv715uIu2z8fY-76" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="1847" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="1852" />
              <mxPoint x="410" y="1887" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-78" value="扣款" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="64" y="1067" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-79" value="callback（渠道callback接口）" style="html=1;verticalAlign=bottom;endArrow=block;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1013.5" y="1717" as="sourcePoint" />
            <mxPoint x="751" y="1717" as="targetPoint" />
            <Array as="points">
              <mxPoint x="840" y="1717" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-80" value="返回callback结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-57" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1013.5" y="1937" as="targetPoint" />
            <Array as="points">
              <mxPoint x="870" y="1937" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-81" value="返回回调结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=1;exitY=0.82;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-76" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="741" y="1927" as="targetPoint" />
            <mxPoint x="390" y="1927" as="sourcePoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-83" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;entryX=1;entryY=0.113;entryDx=0;entryDy=0;entryPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-58" target="ZM-r9oJYv715uIu2z8fY-54" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="670" y="2186" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-84" value="查询支付结果接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=1;exitY=0.238;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" target="ZM-r9oJYv715uIu2z8fY-63" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750" y="2151.04" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-85" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;entryX=1.1;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-63" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="751" y="2184" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-86" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="2253" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-87" value="根据本次查询结果&lt;br&gt;1.处理中，更新有效信息，不更新状态；并且更新补偿单下次执行时间&lt;br&gt;2.终态，更新有效信息，更新状态" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="ZM-r9oJYv715uIu2z8fY-1" target="ZM-r9oJYv715uIu2z8fY-86" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="2210" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="387" y="2210" />
              <mxPoint x="410" y="2210" />
              <mxPoint x="410" y="2238" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-88" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="2323" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-89" value="1.新增支付结果单（订单为终态时）&lt;br&gt;2.更新支付提交单和支付请求单（事务）&lt;br&gt;3.根据支付结果（终态）更新订单补偿单状态为无需补偿" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=1;exitY=0.875;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-86" target="ZM-r9oJYv715uIu2z8fY-88" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="2283" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="2288" />
              <mxPoint x="410" y="2323" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-90" value="支付结果回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="2360" as="sourcePoint" />
            <mxPoint x="79.5" y="2360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-91" value="补偿查询" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="64" y="2427" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-92" value="发起支付结果查询（支付查询接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-91" target="ZM-r9oJYv715uIu2z8fY-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="305" y="2460" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-93" value="返回支付结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="78.5" y="2532" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-94" value="1.必填参数校验（交易单号）&#xa;2.查询支付请求单（tb_funding_channel_request_order），获取支付结果" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="386" y="2460" width="305" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="ZM-r9oJYv715uIu2z8fY-97" target="ZM-r9oJYv715uIu2z8fY-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-96" value="发起支付请求" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ZM-r9oJYv715uIu2z8fY-95" vertex="1" connectable="0">
          <mxGeometry x="-0.2492" y="2" relative="1" as="geometry">
            <mxPoint x="-6" y="-15" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZM-r9oJYv715uIu2z8fY-97" value="上游服务" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="-260" y="1067" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hPng9POzJyjw1oAVkUus-0" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;新增控制请求单（tb_funding_channel_request_order）&lt;br&gt;，请求类型为授权申请&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;1.基于上游授权单号（唯一索引）进行&lt;/span&gt;&lt;b style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;幂等&lt;/b&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;校验&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;br&gt;&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=1;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.475;entryDx=0;entryDy=0;entryPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="384" y="232.60000000000002" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="409" y="232" />
              <mxPoint x="409" y="287" />
            </Array>
            <mxPoint x="384" y="287" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Sv9HGdBQH-pRF9uTRhGp-0" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;新增支付请求单（tb_funding_channel_request_order）&lt;br&gt;，请求类型为协议扣款&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;1.基于上游支付单号（唯一索引）进行&lt;/span&gt;&lt;b style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;幂等&lt;/b&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;校验&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;br&gt;&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=1;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" target="ZM-r9oJYv715uIu2z8fY-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="1184.72" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="385" y="1190" />
              <mxPoint x="410" y="1190" />
              <mxPoint x="410" y="1280" />
            </Array>
            <mxPoint x="385" y="1240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jGk-sT-2N2EgnbNlDsuv-0" value="补偿查询定时器" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="365" y="1962" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jGk-sT-2N2EgnbNlDsuv-1" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="2072" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jGk-sT-2N2EgnbNlDsuv-2" value="根据条件（补偿类型、时间、订单类型、状态等）查询&lt;br&gt;订单补偿单表（tb_funding_channel_order_compensate）" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="jGk-sT-2N2EgnbNlDsuv-0" target="jGk-sT-2N2EgnbNlDsuv-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="45" y="2012" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="450" y="1992" />
              <mxPoint x="450" y="2072" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="jGk-sT-2N2EgnbNlDsuv-3" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="ZM-r9oJYv715uIu2z8fY-1" vertex="1">
          <mxGeometry x="375" y="2121" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jGk-sT-2N2EgnbNlDsuv-4" value="若提交单状态为终态，则根据提交单状态更新请求单状态" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="ZM-r9oJYv715uIu2z8fY-1" source="jGk-sT-2N2EgnbNlDsuv-1" target="jGk-sT-2N2EgnbNlDsuv-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="45" y="2061" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="420" y="2092" />
              <mxPoint x="420" y="2121" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="jGk-sT-2N2EgnbNlDsuv-5" value="&lt;div style=&quot;text-align: left&quot;&gt;若提交单为非状态，则查询支付结果（渠道统一调用接口）&lt;/div&gt;" style="html=1;verticalAlign=bottom;endArrow=block;" parent="ZM-r9oJYv715uIu2z8fY-1" source="jGk-sT-2N2EgnbNlDsuv-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="450" y="2142" as="sourcePoint" />
            <mxPoint x="740" y="2152" as="targetPoint" />
            <Array as="points">
              <mxPoint x="560" y="2152" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="jGk-sT-2N2EgnbNlDsuv-6" value="请求单为终态，则支付结果回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZM-r9oJYv715uIu2z8fY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="2142" as="sourcePoint" />
            <mxPoint x="79.5" y="2142" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="RbniiONg-GQUN5S2Q6Tz" name="出款流程">
    <mxGraphModel dx="1022" dy="436" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-0" />
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-1" parent="QN37zbuTTKGP0GeV6Z_v-0" />
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-2" value="金融交换" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="330" y="40" width="100" height="2070" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-3" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;" parent="QN37zbuTTKGP0GeV6Z_v-2" vertex="1">
          <mxGeometry x="45" y="100" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-4" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="QN37zbuTTKGP0GeV6Z_v-2" vertex="1">
          <mxGeometry x="45" y="240" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-5" value="1.若渠道为虚拟渠道，则支付状态置为成功，不调用渠道网关&lt;br&gt;2.若渠道为异步渠道，则支付状态置为INIT，不调用渠道网关&lt;br&gt;3.若渠道为线下出款渠道，则支付状态置为INIT，不调用渠道网关" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;align=left;" parent="QN37zbuTTKGP0GeV6Z_v-2" source="QN37zbuTTKGP0GeV6Z_v-6" target="QN37zbuTTKGP0GeV6Z_v-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="75" y="400" />
              <mxPoint x="75" y="450" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-6" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="QN37zbuTTKGP0GeV6Z_v-2" vertex="1">
          <mxGeometry x="45" y="371" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-7" value="1.新增出款提交单（tb_funding_channel_commit_order）&lt;br&gt;，请求类型为出款" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;" parent="QN37zbuTTKGP0GeV6Z_v-2" source="gI-sUWHhxnGkdJMjHeSK-0" target="QN37zbuTTKGP0GeV6Z_v-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="380" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="80" y="340" />
              <mxPoint x="80" y="380" />
            </Array>
            <mxPoint x="110" y="405" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-8" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="QN37zbuTTKGP0GeV6Z_v-2" vertex="1">
          <mxGeometry x="45" y="440" width="10" height="120" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-9" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-2" vertex="1">
          <mxGeometry x="45" y="630" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-10" value="1. 根据出款结果（终态）新增出款结果单&lt;br&gt;2.&amp;nbsp;根据出款结果更新出款提交单&lt;br&gt;3. 根据出款结果更新出款请求单&lt;br&gt;4. 根据出款结果（提交单或请求单非终态）新增订单补偿单" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="QN37zbuTTKGP0GeV6Z_v-2" target="QN37zbuTTKGP0GeV6Z_v-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="560" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="58" y="560" />
              <mxPoint x="80" y="560" />
              <mxPoint x="80" y="600" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-11" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-2" vertex="1">
          <mxGeometry x="45" y="720" width="10" height="58" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-12" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-2" vertex="1">
          <mxGeometry x="45" y="820" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-13" value="根据提交单号或三方单号查询支付请求单&lt;br&gt;1.若请求单不存在，忽略此次callback&lt;br&gt;2.状态为pending，更新有效信息，不包括状态&lt;br&gt;3.状态到终态，更新有效信息，包括状态&lt;br&gt;4.若为退票状态，则执行退票流程" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="QN37zbuTTKGP0GeV6Z_v-2" target="QN37zbuTTKGP0GeV6Z_v-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="777" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="57" y="777" />
              <mxPoint x="80" y="777" />
              <mxPoint x="80" y="805" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-15" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="QN37zbuTTKGP0GeV6Z_v-2" vertex="1">
          <mxGeometry x="45" y="1202" width="10" height="42" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-16" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="QN37zbuTTKGP0GeV6Z_v-2" vertex="1">
          <mxGeometry x="45" y="1480" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="gI-sUWHhxnGkdJMjHeSK-0" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-2" vertex="1">
          <mxGeometry x="45" y="310" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gI-sUWHhxnGkdJMjHeSK-1" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;渠道&lt;b&gt;筛选&amp;amp;路由&lt;/b&gt;&lt;/span&gt;&lt;br style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;1. 根据支付方式属性、出款交易信息、用户采集要素进行&lt;br&gt;出款渠道筛选和路由（具体流程筛选流程请看&quot;渠道筛选&amp;amp;路由&quot;）&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="QN37zbuTTKGP0GeV6Z_v-2" source="QN37zbuTTKGP0GeV6Z_v-4" target="gI-sUWHhxnGkdJMjHeSK-0" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="45" y="290" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="80" y="270" />
              <mxPoint x="80" y="310" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-17" value="渠道网关" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#e3c800;fontColor=#ffffff;strokeColor=#BFA34D;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="694" y="40" width="102" height="2070" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-18" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="QN37zbuTTKGP0GeV6Z_v-17" vertex="1">
          <mxGeometry x="46" y="450" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-19" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="QN37zbuTTKGP0GeV6Z_v-17" vertex="1">
          <mxGeometry x="46" y="700" width="10" height="240" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-20" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="QN37zbuTTKGP0GeV6Z_v-17" vertex="1">
          <mxGeometry x="46" y="1134" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-21" value="外部集成机构" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;gradientColor=#d5739d;fillColor=#e6d0de;strokeColor=#996185;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="963" y="40" width="102" height="2070" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-22" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="QN37zbuTTKGP0GeV6Z_v-21" vertex="1">
          <mxGeometry x="46" y="480" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-23" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="QN37zbuTTKGP0GeV6Z_v-21" vertex="1">
          <mxGeometry x="36" y="690" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-24" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="QN37zbuTTKGP0GeV6Z_v-21" vertex="1">
          <mxGeometry x="46" y="1174" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-25" value="发起出款请求（出款下单接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-39" target="QN37zbuTTKGP0GeV6Z_v-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="69.5" y="140.0000000000025" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-26" value="校验不通过，返回出款失败" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-3" target="QN37zbuTTKGP0GeV6Z_v-39" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="69.5" y="814.4999999999984" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-27" value="前置校验&#xa;1.必填参数校验（交易单号、商户ID、金额、支付方式信息等）&#xa;" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="383" y="160" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-28" value="根据出款渠道，发起出款申请（渠道统一调用接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=1.2;exitY=0.09;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="517.8" as="sourcePoint" />
            <mxPoint x="740" y="517" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-29" value="返回出款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;entryX=1.1;entryY=0.867;entryDx=0;entryDy=0;entryPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-18" target="QN37zbuTTKGP0GeV6Z_v-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="566" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-32" value="出款接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750" y="534" as="sourcePoint" />
            <mxPoint x="1009" y="534" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-33" value="返回出款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-22" target="QN37zbuTTKGP0GeV6Z_v-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="717" y="553" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-34" value="返回出款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.2;exitY=0.7;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-9" target="QN37zbuTTKGP0GeV6Z_v-39" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="670" as="sourcePoint" />
            <mxPoint x="290" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-35" value="回调通知（callback回调接口）" style="html=1;verticalAlign=bottom;endArrow=open;entryX=0.9;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.1;exitY=0.121;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="737" y="770" as="sourcePoint" />
            <mxPoint x="383" y="770" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-36" value="回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="374" y="948" as="sourcePoint" />
            <mxPoint x="78.5" y="948" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-37" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="375" y="930" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-38" value="1.新增出款结果单&lt;br&gt;2.更新出款提交单和出款请求单（事务）&lt;br&gt;3.根据出款结果（终态）更新订单补偿单状态为无需补偿" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=1;exitY=0.875;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-12" target="QN37zbuTTKGP0GeV6Z_v-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="890" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="895" />
              <mxPoint x="410" y="930" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-39" value="支付引擎" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="29" y="40" width="100" height="1870" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-40" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="QN37zbuTTKGP0GeV6Z_v-39" vertex="1">
          <mxGeometry x="35" y="70" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-41" value="callback（渠道callback接口）" style="html=1;verticalAlign=bottom;endArrow=block;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-21" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="810" y="830" as="sourcePoint" />
            <mxPoint x="751" y="760" as="targetPoint" />
            <Array as="points">
              <mxPoint x="840" y="760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-42" value="返回callback结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-19" target="QN37zbuTTKGP0GeV6Z_v-21" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="810" y="887" as="targetPoint" />
            <Array as="points">
              <mxPoint x="870" y="980" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-43" value="返回回调结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=1;exitY=0.82;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="741" y="970" as="targetPoint" />
            <mxPoint x="390" y="970" as="sourcePoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-44" value="&lt;span style=&quot;text-align: left&quot;&gt;若提交单为非状态，&lt;/span&gt;查询出款结果（渠道统一调用接口）" style="html=1;verticalAlign=bottom;endArrow=block;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="ABvXPjIGgRSCJbonyEXl-3" target="QN37zbuTTKGP0GeV6Z_v-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="1174" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-45" value="返回出款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;entryX=1;entryY=0.113;entryDx=0;entryDy=0;entryPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-20" target="QN37zbuTTKGP0GeV6Z_v-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="670" y="1250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-46" value="查询出款结果接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=1;exitY=0.238;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" target="QN37zbuTTKGP0GeV6Z_v-24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750" y="1213.04" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-47" value="返回出款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;entryX=1.1;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="751" y="1246" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-48" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="375" y="1317" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-49" value="根据本次查询结果&lt;br&gt;1.处理中，更新有效信息，不更新状态；并且更新补偿单下次执行时间&lt;br&gt;2.终态，更新有效信息，更新状态" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" target="QN37zbuTTKGP0GeV6Z_v-48" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="1274" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="387" y="1274" />
              <mxPoint x="410" y="1274" />
              <mxPoint x="410" y="1302" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-50" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="375" y="1387" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-51" value="1.新增出款结果单（订单为终态时）&lt;br&gt;2.更新出款提交单和出款请求单（事务）&lt;br&gt;3.根据出款结果（终态）更新订单补偿单状态为无需补偿" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=1;exitY=0.875;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-48" target="QN37zbuTTKGP0GeV6Z_v-50" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="1347" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="1352" />
              <mxPoint x="410" y="1387" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-52" value="出款结果回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="1424" as="sourcePoint" />
            <mxPoint x="79.5" y="1424" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-53" value="补偿查询" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="64" y="1491" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-54" value="发起出款结果查询（出款查询接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-53" target="QN37zbuTTKGP0GeV6Z_v-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="305" y="1524" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-55" value="返回出款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="QN37zbuTTKGP0GeV6Z_v-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="78.5" y="1596" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QN37zbuTTKGP0GeV6Z_v-56" value="1.必填参数校验（交易单号）&#xa;2.查询出款请求单（tb_funding_channel_request_order），获取出款结果" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="385" y="1524" width="305" height="70" as="geometry" />
        </mxCell>
        <mxCell id="MxTw0rXUGHlBXq7xFNPh-0" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;新增出款请求单（tb_funding_channel_request_order）&lt;/span&gt;&lt;br style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;，请求类型为出款&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;br&gt;1.基于上游支付单号（唯一索引）进行&lt;b&gt;幂等&lt;/b&gt;校验&lt;br&gt;&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=1;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.475;entryDx=0;entryDy=0;entryPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="210" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="385" y="213.52" />
              <mxPoint x="410" y="213.52" />
              <mxPoint x="410" y="293.52" />
            </Array>
            <mxPoint x="385" y="293.52" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gI-sUWHhxnGkdJMjHeSK-2" value="幂等校验不通过，返回出款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.725;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="300" as="sourcePoint" />
            <mxPoint x="77.5" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gI-sUWHhxnGkdJMjHeSK-3" value="无可用渠道，返回出款失败" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.725;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="370" as="sourcePoint" />
            <mxPoint x="77.5" y="370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ABvXPjIGgRSCJbonyEXl-0" value="补偿查询定时器" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="365" y="1030" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ABvXPjIGgRSCJbonyEXl-1" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="375" y="1140" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ABvXPjIGgRSCJbonyEXl-2" value="根据条件（补偿类型、时间、订单类型、状态等）查询&lt;br&gt;订单补偿单表（tb_funding_channel_order_compensate）" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="ABvXPjIGgRSCJbonyEXl-0" target="ABvXPjIGgRSCJbonyEXl-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="45" y="1080" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="450" y="1060" />
              <mxPoint x="450" y="1140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ABvXPjIGgRSCJbonyEXl-3" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="375" y="1189" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ABvXPjIGgRSCJbonyEXl-4" value="若提交单状态为终态，则根据提交单状态更新请求单状态" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="ABvXPjIGgRSCJbonyEXl-1" target="ABvXPjIGgRSCJbonyEXl-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="45" y="1129" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="420" y="1160" />
              <mxPoint x="420" y="1189" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ABvXPjIGgRSCJbonyEXl-5" value="请求单为终态，则支付结果回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="1202" as="sourcePoint" />
            <mxPoint x="79.5" y="1202" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-0" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="374" y="1858" width="10" height="42" as="geometry" />
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-1" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="739" y="1790" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-2" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="1008" y="1830" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-3" value="&lt;span style=&quot;text-align: left&quot;&gt;若提交单为INIT，&lt;/span&gt;发起出款申请（渠道统一调用接口）" style="html=1;verticalAlign=bottom;endArrow=block;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="EzT3OWjovZPjWN6PMVvD-15" target="EzT3OWjovZPjWN6PMVvD-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="379" y="1790" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-4" value="返回出款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;entryX=1;entryY=0.113;entryDx=0;entryDy=0;entryPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="EzT3OWjovZPjWN6PMVvD-1" target="EzT3OWjovZPjWN6PMVvD-0" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="669" y="1866" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-5" value="出款接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=1;exitY=0.238;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" target="EzT3OWjovZPjWN6PMVvD-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="749" y="1829.04" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-6" value="返回出款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;entryX=1.1;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="EzT3OWjovZPjWN6PMVvD-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750" y="1862" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-7" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="374" y="1933" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-8" value="1.新增出款结果单（订单为终态时）&lt;br&gt;2.更新出款提交单和出款请求单（事务）&lt;br&gt;3.根据出款结果（终态）更新出款订单补偿单状态为无需补偿&lt;br&gt;4.根据出款结构（非状态）新增订单状态查询补偿单" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1.133;entryY=0.492;entryDx=0;entryDy=0;entryPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" target="EzT3OWjovZPjWN6PMVvD-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="384" y="1890" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="409" y="1890" />
              <mxPoint x="409" y="1953" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-12" value="异步出款定时器" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="365" y="1624" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-13" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="374" y="1720" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-14" value="根据条件（补偿类型、时间、订单类型、状态等）查询&lt;br&gt;订单补偿单表（tb_funding_channel_order_compensate），&lt;br&gt;获取异步出款的订单" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="EzT3OWjovZPjWN6PMVvD-12" target="EzT3OWjovZPjWN6PMVvD-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="44" y="1696" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="449" y="1654" />
              <mxPoint x="449" y="1730" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-15" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="QN37zbuTTKGP0GeV6Z_v-1" vertex="1">
          <mxGeometry x="374" y="1805" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EzT3OWjovZPjWN6PMVvD-16" value="若提交单状态不是INIT，则终止&lt;br&gt;1.更新出款订单补偿单状态为无需补偿&lt;br&gt;2.新增订单状态查询补偿单" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="QN37zbuTTKGP0GeV6Z_v-1" source="EzT3OWjovZPjWN6PMVvD-13" target="EzT3OWjovZPjWN6PMVvD-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="44" y="1745" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="419" y="1750" />
              <mxPoint x="419" y="1805" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="g_qsZB6HS9bR7a8U93LI" name="线下出款流程">
    <mxGraphModel dx="1022" dy="436" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="mHEl8qIF2MuZ6R4zQQQt-0" />
        <mxCell id="mHEl8qIF2MuZ6R4zQQQt-1" parent="mHEl8qIF2MuZ6R4zQQQt-0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="AGBAHACC8BYw6dAPjbH9" name="退票流程">
    <mxGraphModel dx="1022" dy="436" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="A7x_HcPVgaTHOpxIoZFW-0" />
        <mxCell id="A7x_HcPVgaTHOpxIoZFW-1" parent="A7x_HcPVgaTHOpxIoZFW-0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Vrgm-QRCuw84obFwYlsA" name="退款流程">
    <mxGraphModel dx="1022" dy="436" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-0" />
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-1" parent="CQ6z2DW0cMgjqfZSd6QF-0" />
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-2" value="金融交换" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="330" y="40" width="100" height="1540" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-3" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;" parent="CQ6z2DW0cMgjqfZSd6QF-2" vertex="1">
          <mxGeometry x="45" y="100" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-4" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="CQ6z2DW0cMgjqfZSd6QF-2" vertex="1">
          <mxGeometry x="45" y="227" width="10" height="113" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-5" value="1.新增退款提交单（tb_funding_channel_commit_order）&lt;br&gt;，请求类型为退款" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.967;entryY=0.139;entryDx=0;entryDy=0;entryPerimeter=0;align=left;" parent="CQ6z2DW0cMgjqfZSd6QF-2" source="CQ6z2DW0cMgjqfZSd6QF-6" target="CQ6z2DW0cMgjqfZSd6QF-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="75" y="410" />
              <mxPoint x="75" y="457" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-6" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="CQ6z2DW0cMgjqfZSd6QF-2" vertex="1">
          <mxGeometry x="45" y="371" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-7" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;新增退款请求单（tb_funding_channel_request_order）&lt;br&gt;，请求类型为退款&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=1;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.475;entryDx=0;entryDy=0;entryPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-2" source="CQ6z2DW0cMgjqfZSd6QF-4" target="CQ6z2DW0cMgjqfZSd6QF-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="380" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="80" y="335" />
              <mxPoint x="80" y="390" />
            </Array>
            <mxPoint x="110" y="405" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-8" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="CQ6z2DW0cMgjqfZSd6QF-2" vertex="1">
          <mxGeometry x="45" y="440" width="10" height="120" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-9" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="CQ6z2DW0cMgjqfZSd6QF-2" vertex="1">
          <mxGeometry x="45" y="620" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-10" value="1. 根据退款结果（终态）新增退款结果单&lt;br&gt;2. 根据退款结果更新退款提交单&lt;br&gt;3. 根据退款结果更新退款请求单&lt;br&gt;4. 根据退款结果（提交单或请求单非终态）新增订单补偿单" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="CQ6z2DW0cMgjqfZSd6QF-2" target="CQ6z2DW0cMgjqfZSd6QF-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="560" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="58" y="560" />
              <mxPoint x="80" y="560" />
              <mxPoint x="80" y="600" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="_6Q2lMJsfkfsulQ6Vt6_-0" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="CQ6z2DW0cMgjqfZSd6QF-2" vertex="1">
          <mxGeometry x="45" y="1148" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-11" value="渠道网关" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#e3c800;fontColor=#ffffff;strokeColor=#BFA34D;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="694" y="40" width="102" height="1540" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-12" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="CQ6z2DW0cMgjqfZSd6QF-11" vertex="1">
          <mxGeometry x="46" y="450" width="10" height="100" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-13" value="外部集成机构" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;gradientColor=#d5739d;fillColor=#e6d0de;strokeColor=#996185;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="963" y="40" width="102" height="1540" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-14" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;fillColor=#FFFFFF;align=left;" parent="CQ6z2DW0cMgjqfZSd6QF-13" vertex="1">
          <mxGeometry x="46" y="480" width="10" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-15" value="发起退款申请请求（退款申请接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" target="CQ6z2DW0cMgjqfZSd6QF-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="69.5" y="140" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-16" value="校验不通过，返回退款拒绝" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="69.5" y="234.9999999999999" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-17" value="前置校验&#xa;1.必填参数校验（支付单号、退款金额）&#xa;2.支付单号对应渠道支付请求单是否存在，若不存在，则不通过&#xa;3.渠道支付请求单是否支付成功，若非成功，则不通过&#xa;4.退款金额是否等于支付单金额，若超出，则不通过" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="383" y="160" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-18" value="根据退款渠道，发起撤销/退款申请" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=1.2;exitY=0.09;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="516.8" as="sourcePoint" />
            <mxPoint x="740" y="516" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-19" value="返回撤销/退款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;entryX=0.9;entryY=0.861;entryDx=0;entryDy=0;entryPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-12" target="CQ6z2DW0cMgjqfZSd6QF-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="387" y="566" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-20" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: left ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;选择退款渠道&lt;br&gt;1. 获取渠道支付提交单对应渠道，若此渠道支持退款，则使用此渠道进行退款，若不支持，则退款失败，渠道侧不落单&lt;br&gt;&lt;br&gt;&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="390" y="285" width="350" height="73" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-21" value="若退款状态为失败，返回数据" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0.1;exitY=0.725;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="440" as="sourcePoint" />
            <mxPoint x="69.5" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-22" value="撤销/退款" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750" y="540" as="sourcePoint" />
            <mxPoint x="1009" y="540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-23" value="返回撤销/退款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-14" target="CQ6z2DW0cMgjqfZSd6QF-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="717" y="553" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-24" value="返回退款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=-0.2;exitY=0.7;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="670" as="sourcePoint" />
            <mxPoint x="69.5" y="688" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-25" value="支付引擎" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;rounded=1;shadow=0;glass=0;comic=0;sketch=0;strokeWidth=1;fontFamily=Verdana;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="19" y="40" width="100" height="1540" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-26" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="CQ6z2DW0cMgjqfZSd6QF-25" vertex="1">
          <mxGeometry x="35" y="70" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-27" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="375" y="760" width="10" height="58" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-28" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="375" y="860" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-29" value="根据提交单号或三方单号查询退款请求单&lt;br&gt;1.若请求单不存在，忽略此次callback&lt;br&gt;2.状态为pending，更新有效信息，不包括状态&lt;br&gt;3.状态到终态，更新有效信息，包括状态" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" target="CQ6z2DW0cMgjqfZSd6QF-28" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="817" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="387" y="817" />
              <mxPoint x="410" y="817" />
              <mxPoint x="410" y="845" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-31" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="375" y="1240" width="10" height="42" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-32" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="740" y="740" width="10" height="240" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-33" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="740" y="1179" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-34" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="999" y="730" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-35" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="1009" y="1213" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-36" value="回调通知（callback回调接口）" style="html=1;verticalAlign=bottom;endArrow=open;entryX=0.9;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.1;exitY=0.121;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-32" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="737" y="770" as="sourcePoint" />
            <mxPoint x="383" y="770" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-37" value="回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" target="CQ6z2DW0cMgjqfZSd6QF-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="374" y="948" as="sourcePoint" />
            <mxPoint x="78.5" y="948" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-38" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="375" y="930" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-39" value="1.新增退款结果单&lt;br&gt;2.更新退款提交单和退款请求单（事务）&lt;br&gt;3.根据退款结果（终态）更新订单补偿单状态为无需补偿" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=1;exitY=0.875;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-28" target="CQ6z2DW0cMgjqfZSd6QF-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="890" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="895" />
              <mxPoint x="410" y="930" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-40" value="callback（渠道callback接口）" style="html=1;verticalAlign=bottom;endArrow=block;" parent="CQ6z2DW0cMgjqfZSd6QF-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1013.5" y="760" as="sourcePoint" />
            <mxPoint x="751" y="760" as="targetPoint" />
            <Array as="points">
              <mxPoint x="840" y="760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-41" value="返回callback结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-32" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1013.5" y="980" as="targetPoint" />
            <Array as="points">
              <mxPoint x="870" y="980" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-42" value="返回回调结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=1;exitY=0.82;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="741" y="970" as="targetPoint" />
            <mxPoint x="390" y="970" as="sourcePoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-43" value="若提交单为非终态，查询退款结果（渠道统一调用接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=-0.333;entryY=0.346;entryDx=0;entryDy=0;entryPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="1213.68" as="sourcePoint" />
            <mxPoint x="736.6700000000001" y="1213.68" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-44" value="返回退款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;entryX=1;entryY=0.113;entryDx=0;entryDy=0;entryPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" target="CQ6z2DW0cMgjqfZSd6QF-31" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="670" y="1248" as="targetPoint" />
            <mxPoint x="740" y="1248" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-45" value="查询退款结果接口" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=1;exitY=0.238;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="750" y="1222.04" as="sourcePoint" />
            <mxPoint x="1009" y="1223" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-46" value="返回退款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;entryX=1.1;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-35" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="751" y="1245" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-47" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="375" y="1315" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-48" value="根据本次查询结果&lt;br&gt;1.处理中，更新有效信息，不更新状态；并且更新补偿单下次执行时间&lt;br&gt;2.终态，更新有效信息，更新状态" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" target="CQ6z2DW0cMgjqfZSd6QF-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="1272" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="387" y="1272" />
              <mxPoint x="410" y="1272" />
              <mxPoint x="410" y="1300" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-49" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="375" y="1385" width="10" height="50" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-50" value="1.新增退款结果单（订单为终态时）&lt;br&gt;2.更新退款提交单和退款请求单（事务）&lt;br&gt;3.根据退款结果（终态）更新订单补偿单状态为无需补偿" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;exitX=1;exitY=0.875;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-47" target="CQ6z2DW0cMgjqfZSd6QF-49" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="1345" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="410" y="1350" />
              <mxPoint x="410" y="1385" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-51" value="退款结果回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" target="CQ6z2DW0cMgjqfZSd6QF-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="1422" as="sourcePoint" />
            <mxPoint x="79.5" y="1422" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-52" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;strokeWidth=1;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="375" y="1487" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-53" value="补偿查询" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="54" y="1458" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-54" value="发起退款结果查询（退款查询接口）" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-53" target="CQ6z2DW0cMgjqfZSd6QF-52" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="305" y="1491" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-55" value="返回退款结果" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="CQ6z2DW0cMgjqfZSd6QF-52" target="CQ6z2DW0cMgjqfZSd6QF-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="78.5" y="1563" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CQ6z2DW0cMgjqfZSd6QF-56" value="1.必填参数校验（交易单号）&#xa;2.查询退款请求单（tb_funding_channel_request_order），获取退款结果" style="text;align=left;fontStyle=0;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="385" y="1491" width="305" height="70" as="geometry" />
        </mxCell>
        <mxCell id="cDMh391iNfHfO2NX7W6T-0" value="补偿查询定时器" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="365" y="1030" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cDMh391iNfHfO2NX7W6T-1" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="CQ6z2DW0cMgjqfZSd6QF-1" vertex="1">
          <mxGeometry x="375" y="1131" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cDMh391iNfHfO2NX7W6T-2" value="根据条件（补偿类型、时间、订单类型、状态等）查询&lt;br&gt;订单补偿单表（tb_funding_channel_order_compensate）" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="cDMh391iNfHfO2NX7W6T-0" target="cDMh391iNfHfO2NX7W6T-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="45" y="1080" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="450" y="1060" />
              <mxPoint x="450" y="1140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cDMh391iNfHfO2NX7W6T-3" value="若提交单状态为终态，则根据提交单状态更新请求单状态" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" source="cDMh391iNfHfO2NX7W6T-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="45" y="1129" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="420" y="1160" />
              <mxPoint x="420" y="1189" />
            </Array>
            <mxPoint x="385" y="1189" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="PZtjALsbxRmuVYay0yR8-0" value="请求单为终态，则退款结果回调通知" style="html=1;verticalAlign=bottom;endArrow=open;endSize=8;exitX=-0.1;exitY=0.8;exitDx=0;exitDy=0;exitPerimeter=0;" parent="CQ6z2DW0cMgjqfZSd6QF-1" target="CQ6z2DW0cMgjqfZSd6QF-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="375" y="1202" as="sourcePoint" />
            <mxPoint x="79.5" y="1202" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="l-2SIGGSRNtAMm_2xDZ1" name="第 8 页">
    <mxGraphModel dx="782" dy="436" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-0" />
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-1" parent="fYfye8P2K6Qqt2dPv1-J-0" />
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-5">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="425" y="181" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-5" value="AbstractBaseManage" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="345" y="224" width="160" height="52" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-8" value="+ execute(IN): OUT" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-5">
          <mxGeometry y="26" width="160" height="26" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-10" value="«interface»&lt;br&gt;&lt;b&gt;BaseManage&lt;/b&gt;" style="html=1;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="370" y="131" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.506;entryY=0.974;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-11" target="fYfye8P2K6Qqt2dPv1-J-8">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="426" y="361" />
              <mxPoint x="426" y="361" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-50" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.154;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=12;startArrow=diamondThin;startFill=0;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-11" target="fYfye8P2K6Qqt2dPv1-J-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-11" value="AbstractTransactionManage" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="257.5" y="328" width="335" height="140" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-14" value="+ paramCheck(BizContextBO): Void&#xa;+ createChannelRequestOrder(BizContextBO): Void&#xa;+ channelRouting(BizContextBO): Void&#xa;+ getExchangeTemplate(): ExchangeTemplate&#xa;+ loopExchange(BizContextBO): Void&#xa;+ updateChannelRequestOrder(BizContextBO): Void&#xa;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-11">
          <mxGeometry y="26" width="335" height="114" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-20" target="fYfye8P2K6Qqt2dPv1-J-14">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="240" y="500" />
              <mxPoint x="350" y="500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-20" value="PayManage" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="110" y="532" width="260" height="70" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-21" value="+ paramCheck(BizContextBO): Void&#xa;+ getExchangeTemplate(): ExchangeTemplate" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-20">
          <mxGeometry y="26" width="260" height="44" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-28" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-25" target="fYfye8P2K6Qqt2dPv1-J-14">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="600" y="500" />
              <mxPoint x="490" y="500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-25" value="PayoutManage" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="470" y="532" width="260" height="70" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-26" value="+ paramCheck(BizContextBO): Void&#xa;+ getExchangeTemplate(): ExchangeTemplate" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-25">
          <mxGeometry y="26" width="260" height="44" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-34">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1178" y="299" as="targetPoint" />
            <mxPoint x="1178" y="342" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-32" value="«interface»&lt;br style=&quot;font-size: 12px;&quot;&gt;&lt;b style=&quot;font-family: &amp;quot;dejavu sans mono&amp;quot;; font-size: 12px;&quot;&gt;ExchangeTemplate&lt;/b&gt;" style="html=1;fontSize=12;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="1114" y="249" width="127" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-51" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.858;entryY=0.013;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=12;startArrow=diamondThin;startFill=0;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-34" target="fYfye8P2K6Qqt2dPv1-J-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-34" value="AbstractExchangeTemplate" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="998.5" y="346" width="359.5" height="120" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-35" value="+ buildExchangeRequest(BizContextBO): InternalBaseRequest&#xa;+ createChannelCommitOrder(BizContextBO): Void&#xa;+ send(BizContextBO): Void&#xa;+ updateChannelCommitOrder(BizContextBO): Void&#xa;+ buildOut(BizContextBO): OUT&#xa;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-34">
          <mxGeometry y="26" width="359.5" height="94" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" target="fYfye8P2K6Qqt2dPv1-J-35">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="993" y="499" />
              <mxPoint x="1103" y="499" />
            </Array>
            <mxPoint x="993" y="550" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-37" value="PayPastFrontExchangeTemplate" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="790" y="532" width="350" height="70" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-38" value="+ buildExchangeRequest(BizContextBO): InternalBaseRequest&#xa;+ buildOut(BizContextBO): OUT" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-37">
          <mxGeometry y="26" width="350" height="44" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-40" target="fYfye8P2K6Qqt2dPv1-J-35">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1353" y="499" />
              <mxPoint x="1243" y="499" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-40" value="PayoutPastFrontExchangeTemplate" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="1223" y="532" width="347" height="70" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-41" value="+ buildExchangeRequest(BizContextBO): InternalBaseRequest&#xa;+ buildOut(BizContextBO): OUT" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-40">
          <mxGeometry y="26" width="347" height="44" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-45" value="" style="endArrow=classic;html=1;rounded=0;fontSize=12;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;curved=1;startArrow=diamondThin;startFill=0;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-14" target="fYfye8P2K6Qqt2dPv1-J-32">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="700" y="401" as="sourcePoint" />
            <mxPoint x="800" y="351" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-47" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=12;startArrow=diamondThin;startFill=0;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-46" target="fYfye8P2K6Qqt2dPv1-J-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-46" value="«interface»&lt;br&gt;&lt;b&gt;BaseController&lt;/b&gt;" style="html=1;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="325" y="30" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-54" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=12;startArrow=diamondThin;startFill=0;" edge="1" parent="fYfye8P2K6Qqt2dPv1-J-1" source="fYfye8P2K6Qqt2dPv1-J-48" target="fYfye8P2K6Qqt2dPv1-J-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-48" value="«interface»&lt;br&gt;&lt;b&gt;BaseService&lt;/b&gt;" style="html=1;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="260" y="680" width="1070" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fYfye8P2K6Qqt2dPv1-J-52" value="«interface»&lt;br&gt;&lt;b&gt;BaseDAO&lt;/b&gt;" style="html=1;" vertex="1" parent="fYfye8P2K6Qqt2dPv1-J-1">
          <mxGeometry x="695" y="780" width="200" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
